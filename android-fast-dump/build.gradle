apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'

dependencies {
    implementation project(':shark-log')
    implementation deps.kotlin.stdlib
    implementation deps.androidx.annotation
}

android {
    compileSdkVersion versions.compileSdk
    defaultConfig {
        minSdkVersion versions.minSdk

        ndkVersion versions.ndkVersion

        externalNativeBuild {
            cmake {
                abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
                arguments "-DANDROID_TOOLCHAIN=clang", "-DANDROID_STL=c++_shared", "-DCMAKE_VERBOSE_MAKEFILE=ON"
                cppFlags "-std=c++17", "-Wl,--gc-sections", "-fno-exceptions", "-fno-rtti", "-fvisibility=hidden", "-flto"
            }
        }

        consumerProguardFiles 'consumer-proguard-rules.pro'
    }

    externalNativeBuild {
        cmake {
            path file('src/main/cpp/CMakeLists.txt')
        }
    }

    lintOptions {
        disable 'GoogleAppIndexingWarning'
        // junit references java.lang.management
        ignore 'InvalidPackage'
        check 'Interoperability'
    }
}

apply from: rootProject.file('gradle/gradle-mvn-push.gradle')